<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√Åreas de Atua√ß√£o dos Professores (Colaps√°vel)</title>
    
    <style> /* ... CSS com .collapse-icon e .atuacao-content: none ... */ </style>

    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/lib/marked.umd.min.js"></script>
</head>
<body>

    <div class="container">
        <h1>√Åreas de Pesquisa e TCC dos Professores</h1>
        <p>Clique no nome do professor para expandir a √°rea de atua√ß√£o.</p>
        <div id="professores-list">Carregando dados...</div>
    </div>

    <script>
        const professoresList = document.getElementById('professores-list');
        const CONFIG_PATH = './professores_config.json';
        const MARCKDOWN_FOLDER = 'professores/'; 

        /**
         * Fun√ß√£o para alternar (toggle) a visibilidade do conte√∫do.
         */
        function toggleCard(event) {
            // Encontra o elemento 'h2' que foi clicado
            const header = event.currentTarget; 
            // Encontra o elemento card pai
            const card = header.closest('.professor-card');
            // Encontra o conte√∫do a ser exibido/escondido
            const content = card.querySelector('.atuacao-content');

            // 1. Alterna a classe 'show' no conte√∫do
            content.classList.toggle('show');
            // 2. Alterna a classe 'expanded' no card para girar a seta
            card.classList.toggle('expanded');
        }

        /**
         * Cria o card inicial na tela e anexa o evento de clique.
         */
        function criarCardInicial(professor) {
            const card = document.createElement('div');
            card.className = 'professor-card';
            
            // Cria o cabe√ßalho clic√°vel com o √≠cone de expans√£o (‚ñ∂)
            const headerHtml = `
                <h2>
                    ${professor.nome}
                    <span class="collapse-icon">‚ñ∂</span>
                </h2>
                <div class="atuacao-content">Buscando informa√ß√µes...</div>
            `;
            card.innerHTML = headerHtml;
            
            // üí° ANEXA O EVENTO DE CLIQUE AO T√çTULO (h2)
            card.querySelector('h2').addEventListener('click', toggleCard);
            
            professoresList.appendChild(card);
            return card;
        }

        // ... O restante das fun√ß√µes fetchAndRenderMarkdown e carregarProfessores
        
        function fetchAndRenderMarkdown(professor) {
            const card = criarCardInicial(professor);
            const contentContainer = card.querySelector('.atuacao-content');
            
            const url = MARCKDOWN_FOLDER + professor.arquivo_markdown; 
            const urlWithCacheBuster = `${url}?t=${new Date().getTime()}`;

            fetch(urlWithCacheBuster)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Arquivo n√£o encontrado (Status: ${response.status})`);
                    }
                    return response.text();
                })
                .then(markdownText => {
                    const htmlContent = marked.parse(markdownText);
                    contentContainer.innerHTML = htmlContent;
                })
                .catch(error => {
                    // ... (Tratamento de erro)
                });
        }
        
        function carregarProfessores() {
            const CONFIG_PATH = './professores_config.json'; // Redefinido aqui se n√£o estiver no escopo global
            fetch(CONFIG_PATH)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Erro ao carregar a configura√ß√£o: ${CONFIG_PATH} n√£o encontrado.`);
                    }
                    return response.json();
                })
                .then(PROFESSORES_CONFIG => {
                    professoresList.innerHTML = '';
                    PROFESSORES_CONFIG.forEach(fetchAndRenderMarkdown);
                })
                .catch(error => {
                    professoresList.innerHTML = `<div style="color: red;"><strong>ERRO FATAL:</strong> ${error.message}</div>`;
                });
        }

        // Inicia o processo
        carregarProfessores();
    </script>
</body>
</html>