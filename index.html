<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>√Åreas de Atua√ß√£o dos Professores</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary-color: #007bff; /* Azul prim√°rio */
            --secondary-color: #f8f9fa; /* Cinza claro de fundo */
            --text-color: #343a40; /* Texto escuro */
            --border-color: #dee2e6;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 40px 20px;
            background-color: var(--secondary-color);
            color: var(--text-color);
        }
        .container {
            max-width: 960px;
            margin: 0 auto;
            padding: 30px;
            background-color: #ffffff;
            border-radius: 10px;
            box-shadow: var(--shadow);
        }
        h1 {
            color: var(--primary-color);
            font-weight: 700;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 10px;
            margin-bottom: 20px;
        }

        /* CARD DO PROFESSOR */
        .professor-card {
            margin-bottom: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            transition: box-shadow 0.3s, background-color 0.3s;
        }
        .professor-card:hover {
            box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
            background-color: #f1f7fe; /* Leve destaque ao passar o mouse */
        }

        /* CABE√áALHO CLIC√ÅVEL */
        .professor-card h2 {
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            margin: 0;
            font-size: 1.25em;
            color: var(--text-color);
            background-color: #e9ecef; /* Fundo levemente cinza */
            border-bottom: none;
        }
        
        /* √çCONE DE EXPANS√ÉO */
        .collapse-icon {
            font-size: 1.2em;
            font-weight: 700;
            transition: transform 0.3s ease;
            color: var(--primary-color);
        }

        /* Gira o √≠cone (‚ñº vira ‚ñ∫) quando expandido */
        .expanded .collapse-icon {
            transform: rotate(-180deg);
        }

        /* CONTE√öDO (Colapsado por padr√£o) */
        .atuacao-content {
            display: none; /* COME√áA COLAPSADO */
            padding: 20px;
            line-height: 1.6;
        }
        
        /* Exibe o conte√∫do quando a classe 'show' √© ativada */
        .atuacao-content.show {
            display: block;
        }

        /* Estilos para o Markdown dentro do conte√∫do */
        .atuacao-content h1, .atuacao-content h2 { 
            color: var(--primary-color); 
            font-size: 1.4em; 
            margin-top: 15px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 5px;
        }
        .atuacao-content ul, .atuacao-content ol { 
            padding-left: 25px; 
            margin-bottom: 15px;
        }
    </style>

    <script src="https://cdn.jsdelivr.net/npm/marked@12.0.0/lib/marked.umd.min.js"></script>
</head>
<body>

    <div class="container">
        <h1>Professores: √Åreas de Pesquisa e Disponibilidade para TCC</h1>
        <p>Clique no nome do professor para visualizar as √°reas de pesquisa detalhadas.</p>
        <div id="professores-list">Carregando dados...</div>
    </div>

    <script>
        const professoresList = document.getElementById('professores-list');
        const CONFIG_PATH = './professores_config.json';
        const MARCKDOWN_FOLDER = 'professores/'; 

        /**
         * Fun√ß√£o para alternar (toggle) a visibilidade do conte√∫do.
         */
        function toggleCard(event) {
            const header = event.currentTarget; 
            const card = header.closest('.professor-card');
            const content = card.querySelector('.atuacao-content');

            // Alterna as classes para exibir o conte√∫do e girar o √≠cone
            content.classList.toggle('show');
            card.classList.toggle('expanded');
        }

        /**
         * Cria o card inicial na tela e anexa o evento de clique.
         */
        function criarCardInicial(professor) {
            const card = document.createElement('div');
            card.className = 'professor-card';
            
            const header = document.createElement('h2');
            header.innerHTML = `
                <span>${professor.nome}</span>
                <span class="collapse-icon">‚ñº</span> 
            `;
            
            // üí° ANEXA O EVENTO DE CLIQUE AO T√çTULO
            header.addEventListener('click', toggleCard);
            
            const contentContainer = document.createElement('div');
            contentContainer.className = 'atuacao-content';
            contentContainer.innerHTML = 'Carregando...';

            card.appendChild(header);
            card.appendChild(contentContainer);
            professoresList.appendChild(card);
            
            return { card, contentContainer };
        }

        /**
         * Busca o arquivo Markdown local e renderiza o conte√∫do.
         */
        function fetchAndRenderMarkdown(professor) {
            const { card, contentContainer } = criarCardInicial(professor);
            
            const url = MARCKDOWN_FOLDER + professor.arquivo_markdown; 
            const urlWithCacheBuster = `${url}?t=${new Date().getTime()}`;

            fetch(urlWithCacheBuster)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Arquivo n√£o encontrado (Status: ${response.status})`);
                    }
                    return response.text();
                })
                .then(markdownText => {
                    const htmlContent = marked.parse(markdownText);
                    contentContainer.innerHTML = htmlContent;
                })
                .catch(error => {
                    console.error(`Erro ao buscar ${professor.nome}:`, error.message);
                    contentContainer.innerHTML = `
                        <p style="color: red;">
                            <strong>ERRO:</strong> N√£o foi poss√≠vel carregar o arquivo.
                        </p>
                        <small>Verifique o caminho do arquivo: <code>${url}</code></small>
                    `;
                });
        }
        
        /**
         * Fun√ß√£o principal: Busca a lista de professores e inicia a renderiza√ß√£o.
         */
        function carregarProfessores() {
            fetch(CONFIG_PATH)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Erro ao carregar a configura√ß√£o: ${CONFIG_PATH} n√£o encontrado. Verifique se o JSON est√° formatado corretamente.`);
                    }
                    return response.json();
                })
                .then(PROFESSORES_CONFIG => {
                    professoresList.innerHTML = ''; 
                    PROFESSORES_CONFIG.forEach(fetchAndRenderMarkdown);
                })
                .catch(error => {
                    professoresList.innerHTML = `<div style="color: red; padding: 15px; border: 1px solid red;"><strong>ERRO FATAL:</strong> ${error.message}</div>`;
                });
        }

        // Inicia o processo
        carregarProfessores();
    </script>
</body>
</html>